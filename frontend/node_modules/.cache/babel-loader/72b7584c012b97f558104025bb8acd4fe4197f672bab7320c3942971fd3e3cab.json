{"ast":null,"code":"import React,{useState,useEffect}from'react';import AlertList from'../components/alerts/AlertList';import{BellIcon}from'@heroicons/react/24/outline';import api from'../services/api';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Alerts=()=>{const[alerts,setAlerts]=useState([]);const[loading,setLoading]=useState(true);const[filter,setFilter]=useState();useEffect(()=>{fetchAlerts();},[]);const fetchAlerts=async()=>{try{const response=await api.get('/alerts');setAlerts(response.data);}catch(error){console.error('Error fetching alerts:',error);toast.error('Failed to load alerts');}finally{setLoading(false);}};const handleAlertClick=async alert=>{try{if(alert.status==='PENDING'){await api.patch(`/alerts/${alert.id}`,{status:'ACKNOWLEDGED'});toast.success('Alert acknowledged');fetchAlerts();}}catch(error){console.error('Error updating alert:',error);toast.error('Failed to update alert');}};const filteredAlerts=filter?alerts.filter(alert=>alert.status===filter):alerts;const alertStats={total:alerts.length,pending:alerts.filter(a=>a.status==='PENDING').length,urgent:alerts.filter(a=>a.priority==='URGENT').length};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex h-full items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-32 w-32 animate-spin rounded-full border-b-2 border-gray-900\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"sm:flex sm:items-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"sm:flex-auto\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-semibold text-gray-900\",children:\"Legal Alerts\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-sm text-gray-700\",children:\"Track and manage your legal deadlines, compliance updates, and document expirations\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 grid grid-cols-1 gap-5 sm:grid-cols-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-hidden rounded-lg bg-white px-4 py-5 shadow sm:p-6\",children:[/*#__PURE__*/_jsx(\"dt\",{className:\"truncate text-sm font-medium text-gray-500\",children:\"Total Alerts\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"mt-1 text-3xl font-semibold text-gray-900\",children:alertStats.total})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-hidden rounded-lg bg-white px-4 py-5 shadow sm:p-6\",children:[/*#__PURE__*/_jsx(\"dt\",{className:\"truncate text-sm font-medium text-gray-500\",children:\"Pending Alerts\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"mt-1 text-3xl font-semibold text-yellow-600\",children:alertStats.pending})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-hidden rounded-lg bg-white px-4 py-5 shadow sm:p-6\",children:[/*#__PURE__*/_jsx(\"dt\",{className:\"truncate text-sm font-medium text-gray-500\",children:\"Urgent Alerts\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"mt-1 text-3xl font-semibold text-red-600\",children:alertStats.urgent})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"sm:flex sm:items-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"sm:flex-auto\",children:/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 sm:mt-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setFilter(undefined),className:`rounded-md px-3 py-2 text-sm font-medium ${!filter?'bg-gray-100 text-gray-900':'text-gray-700 hover:bg-gray-50'}`,children:\"All\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setFilter('PENDING'),className:`rounded-md px-3 py-2 text-sm font-medium ${filter==='PENDING'?'bg-gray-100 text-gray-900':'text-gray-700 hover:bg-gray-50'}`,children:\"Pending\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setFilter('ACKNOWLEDGED'),className:`rounded-md px-3 py-2 text-sm font-medium ${filter==='ACKNOWLEDGED'?'bg-gray-100 text-gray-900':'text-gray-700 hover:bg-gray-50'}`,children:\"Acknowledged\"})]})})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6\",children:filteredAlerts.length>0?/*#__PURE__*/_jsx(AlertList,{alerts:filteredAlerts,onAlertClick:handleAlertClick}):/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center rounded-lg border-2 border-dashed border-gray-300 p-12\",children:[/*#__PURE__*/_jsx(BellIcon,{className:\"h-12 w-12 text-gray-400\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-sm font-medium text-gray-900\",children:\"No alerts\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:filter?'No alerts match the current filter':\"You're all caught up!\"})]})})]});};export default Alerts;","map":{"version":3,"names":["React","useState","useEffect","AlertList","BellIcon","api","toast","jsx","_jsx","jsxs","_jsxs","Alerts","alerts","setAlerts","loading","setLoading","filter","setFilter","fetchAlerts","response","get","data","error","console","handleAlertClick","alert","status","patch","id","success","filteredAlerts","alertStats","total","length","pending","a","urgent","priority","className","children","onClick","undefined","onAlertClick"],"sources":["C:/Users/root/CascadeProjects/legal-assistant-platform/frontend/src/pages/Alerts.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport AlertList from '../components/alerts/AlertList';\nimport { BellIcon } from '@heroicons/react/24/outline';\nimport api from '../services/api';\nimport toast from 'react-hot-toast';\n\ninterface Alert {\n  id: string;\n  type: 'DEADLINE' | 'COMPLIANCE' | 'DOCUMENT_EXPIRY' | 'CUSTOM';\n  title: string;\n  description: string;\n  priority: 'LOW' | 'MEDIUM' | 'HIGH' | 'URGENT';\n  dueDate: string;\n  status: 'PENDING' | 'ACKNOWLEDGED' | 'RESOLVED' | 'EXPIRED';\n}\n\nconst Alerts = () => {\n  const [alerts, setAlerts] = useState<Alert[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [filter, setFilter] = useState<Alert['status']>();\n\n  useEffect(() => {\n    fetchAlerts();\n  }, []);\n\n  const fetchAlerts = async () => {\n    try {\n      const response = await api.get('/alerts');\n      setAlerts(response.data);\n    } catch (error) {\n      console.error('Error fetching alerts:', error);\n      toast.error('Failed to load alerts');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAlertClick = async (alert: Alert) => {\n    try {\n      if (alert.status === 'PENDING') {\n        await api.patch(`/alerts/${alert.id}`, { status: 'ACKNOWLEDGED' });\n        toast.success('Alert acknowledged');\n        fetchAlerts();\n      }\n    } catch (error) {\n      console.error('Error updating alert:', error);\n      toast.error('Failed to update alert');\n    }\n  };\n\n  const filteredAlerts = filter\n    ? alerts.filter((alert) => alert.status === filter)\n    : alerts;\n\n  const alertStats = {\n    total: alerts.length,\n    pending: alerts.filter((a) => a.status === 'PENDING').length,\n    urgent: alerts.filter((a) => a.priority === 'URGENT').length,\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex h-full items-center justify-center\">\n        <div className=\"h-32 w-32 animate-spin rounded-full border-b-2 border-gray-900\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8\">\n      {/* Header */}\n      <div className=\"sm:flex sm:items-center\">\n        <div className=\"sm:flex-auto\">\n          <h1 className=\"text-2xl font-semibold text-gray-900\">Legal Alerts</h1>\n          <p className=\"mt-2 text-sm text-gray-700\">\n            Track and manage your legal deadlines, compliance updates, and document expirations\n          </p>\n        </div>\n      </div>\n\n      {/* Stats */}\n      <div className=\"mt-4 grid grid-cols-1 gap-5 sm:grid-cols-3\">\n        <div className=\"overflow-hidden rounded-lg bg-white px-4 py-5 shadow sm:p-6\">\n          <dt className=\"truncate text-sm font-medium text-gray-500\">Total Alerts</dt>\n          <dd className=\"mt-1 text-3xl font-semibold text-gray-900\">{alertStats.total}</dd>\n        </div>\n        <div className=\"overflow-hidden rounded-lg bg-white px-4 py-5 shadow sm:p-6\">\n          <dt className=\"truncate text-sm font-medium text-gray-500\">Pending Alerts</dt>\n          <dd className=\"mt-1 text-3xl font-semibold text-yellow-600\">{alertStats.pending}</dd>\n        </div>\n        <div className=\"overflow-hidden rounded-lg bg-white px-4 py-5 shadow sm:p-6\">\n          <dt className=\"truncate text-sm font-medium text-gray-500\">Urgent Alerts</dt>\n          <dd className=\"mt-1 text-3xl font-semibold text-red-600\">{alertStats.urgent}</dd>\n        </div>\n      </div>\n\n      {/* Filters */}\n      <div className=\"mt-4\">\n        <div className=\"sm:flex sm:items-center\">\n          <div className=\"sm:flex-auto\">\n            <div className=\"mt-4 sm:mt-0\">\n              <div className=\"flex space-x-4\">\n                <button\n                  onClick={() => setFilter(undefined)}\n                  className={`rounded-md px-3 py-2 text-sm font-medium ${\n                    !filter\n                      ? 'bg-gray-100 text-gray-900'\n                      : 'text-gray-700 hover:bg-gray-50'\n                  }`}\n                >\n                  All\n                </button>\n                <button\n                  onClick={() => setFilter('PENDING')}\n                  className={`rounded-md px-3 py-2 text-sm font-medium ${\n                    filter === 'PENDING'\n                      ? 'bg-gray-100 text-gray-900'\n                      : 'text-gray-700 hover:bg-gray-50'\n                  }`}\n                >\n                  Pending\n                </button>\n                <button\n                  onClick={() => setFilter('ACKNOWLEDGED')}\n                  className={`rounded-md px-3 py-2 text-sm font-medium ${\n                    filter === 'ACKNOWLEDGED'\n                      ? 'bg-gray-100 text-gray-900'\n                      : 'text-gray-700 hover:bg-gray-50'\n                  }`}\n                >\n                  Acknowledged\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Alert List */}\n      <div className=\"mt-6\">\n        {filteredAlerts.length > 0 ? (\n          <AlertList alerts={filteredAlerts} onAlertClick={handleAlertClick} />\n        ) : (\n          <div className=\"flex flex-col items-center justify-center rounded-lg border-2 border-dashed border-gray-300 p-12\">\n            <BellIcon className=\"h-12 w-12 text-gray-400\" />\n            <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No alerts</h3>\n            <p className=\"mt-1 text-sm text-gray-500\">\n              {filter ? 'No alerts match the current filter' : \"You're all caught up!\"}\n            </p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Alerts;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}